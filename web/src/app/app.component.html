<div ngClass="mat-typography main-wrapper" [class]="settings.currentTheme.cssClass" [class.focused]="isElectronFocused" [class.electron]="isElectron" >
  <mat-toolbar>
    <button mat-icon-button (click)="sidenav.toggle()" class="toggle">
      <mat-icon>{{ sidenav.opened ? 'close' : 'menu' }}</mat-icon>
    </button>
    <h1>
      <a routerLink="/" class="link" tabindex="-1">
        Musicalypse
      </a>
    </h1>
    <div class="filler"></div>
    <div class="electron-buttons" *ngIf="isElectron">
      <mat-icon class="electron-theme" (click)="themeChooser = true">format_color_fill</mat-icon>
      <mat-icon (click)="application.minimize()">remove</mat-icon>
      <mat-icon (click)="application.maximize()" *ngIf="!application.isMaximized()">crop_square</mat-icon>
      <mat-icon (click)="application.unmaximize()" *ngIf="application.isMaximized()">crop_16_9</mat-icon>
      <mat-icon class="close" (click)="application.close()">close</mat-icon>
    </div>
    <button mat-button mat-icon-button
            class="theme-button"
            (click)="themeChooser = true"
            *ngIf="!isElectron">
      <mat-icon>format_color_fill</mat-icon>
    </button>
    <div class="theme-chooser-backdrop" *ngIf="themeChooser" (click)="themeChooser = false"></div>
    <div class="theme-chooser" [ngClass]="themeChooser ? 'visible' : ''" (click)="themeChooser = false">
      <ol>
        <li *ngFor="let theme of settings.featuredThemes">
          <button mat-icon-button (click)="settings.changeTheme(theme)" [style]="settings.getThemeStyle(theme)">
            <mat-icon *ngIf="settings.isCurrentTheme(theme)" color="primary">check</mat-icon>
          </button>
        </li>
      </ol>
    </div>
  </mat-toolbar>
  <mat-progress-bar class="main-loader" mode="indeterminate" [class.show]="loader.isLoading()"></mat-progress-bar>
  <nav class="side-menu">
    <button mat-icon-button (click)="sidenav.toggle()" class="toggle">
      <mat-icon>{{ sidenav.opened ? 'close' : 'menu' }}</mat-icon>
    </button>
    <button mat-icon-button routerLink="/library" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }" (click)="sidenav.close()">
      <mat-icon>queue_music</mat-icon>
    </button>
    <button mat-icon-button>
      <mat-icon>schedule</mat-icon>
    </button>
    <button mat-icon-button>
      <mat-icon>favorite_border</mat-icon>
    </button>
    <button mat-icon-button class="album">
      <mat-icon>album</mat-icon>
    </button>
    <button mat-icon-button>
      <mat-icon>mode_edit</mat-icon>
    </button>
    <button mat-icon-button routerLink="/settings" routerLinkActive="active" (click)="sidenav.close()">
      <mat-icon>settings</mat-icon>
    </button>
    <button mat-icon-button>
      <mat-icon>info</mat-icon>
    </button>
  </nav>
  <mat-sidenav-container>
    <mat-sidenav #sidenav [mode]="'over'">
      <mat-nav-list>
        <h3 mat-subheader>Navigation</h3>
        <mat-divider></mat-divider>
        <a mat-list-item routerLink="/library" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }" (click)="sidenav.close()">
          <mat-icon matListIcon>queue_music</mat-icon>
          <span matLine>
            <mat-icon *ngIf="library.audio.playing && !library.audio.muted">volume_up</mat-icon>
            Library
          </span>
        </a>
        <a mat-list-item routerLink="/recent" routerLinkActive="active" (click)="sidenav.close()">
          <mat-icon matListIcon>schedule</mat-icon>
          <span matLine>Recently played</span>
        </a>
        <a mat-list-item routerLink="/favorites" routerLinkActive="active" (click)="sidenav.close()">
          <mat-icon matListIcon>favorite_border</mat-icon>
          <span matLine>Favorites</span>
        </a>
        <a mat-list-item routerLink="/playlists" routerLinkActive="active" (click)="sidenav.close()">
          <mat-icon matListIcon>album</mat-icon>
          <span matLine>Playlists</span>
        </a>
        <mat-divider></mat-divider>
        <a mat-list-item routerLink="/editor" routerLinkActive="active" (click)="sidenav.close()">
          <mat-icon matListIcon>mode_edit</mat-icon>
          <span matLine>Tag editor</span>
        </a>
        <a mat-list-item routerLink="/settings" routerLinkActive="active" (click)="sidenav.close()">
          <mat-icon matListIcon>settings</mat-icon>
          <span matLine>Settings</span>
        </a>
        <a mat-list-item routerLink="/about" routerLinkActive="active" (click)="sidenav.close()">
          <mat-icon matListIcon>info</mat-icon>
          <span matLine>About</span>
        </a>
      </mat-nav-list>
    </mat-sidenav>
    <router-outlet></router-outlet>
  </mat-sidenav-container>
</div>

<app-audio #audio></app-audio>
