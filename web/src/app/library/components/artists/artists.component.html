<div class="wrapper">

  <app-chips #chips
             [hidden]="!showChipList"
             [list]="selectedArtists"
             [displayProperty]="'name'"
             (clickedElement)="scrollTo($event.name)"
             (removedAll)="deselectAll()"
             (removedElement)="deselect($event)">
  </app-chips>

  <app-controls [(search)]="search"
                [searchPlaceholder]="'Search an artist'"
                [backButton]="false">
    <span class="select-text" *ngIf="selectedArtists.length == 0">
      Select an artist or
      <mat-chip (click)="library.selectAllArtists(library.artistSource)">Select All</mat-chip>
    </span>
    <mat-chip-list>
      <mat-chip *ngFor="let artist of selectedArtists.length <= 2 ? selectedArtists : selectedArtists.slice(0,1)"
                (click)="scrollTo(artist.name)">
        <span class="chip-text">{{ artist.name }}</span>
        <mat-icon matChipRemove (click)="library.deselectArtist(artist)">cancel</mat-icon>
      </mat-chip>
      <mat-chip *ngIf="selectedArtists.length > 2"
                (click)="showChipList = !showChipList"
                class="chip-more">
        {{ selectedArtists.length - 1 }} moreâ€¦
      </mat-chip>
    </mat-chip-list>
  </app-controls>

  <div #list class="list-wrapper" (swipeleft)="next.emit()">
    <mat-list class="artists" dense>
      <ng-container *ngFor="let artist of artists.map(filter) | async; trackBy: trackByName">
        <app-list-item [selected]="library.isSelectedArtist(artist)"
                       [avatarStyle]="getAvatarStyle(artist)"
                       [warn]="artist.warn && settings.warnOnMissingTags"
                       [primaryHTML]="artist.name | sgSearch:search"
                       [secondaryHTML]="artist.songs + ' songs'"
                       (click)="library.selectArtist(artist); next.emit()"
                       (arrowClicked)="library.addArtist(artist); next.emit()"
                       (checked)="$event ? library.addArtist(artist) : library.deselectArtist(artist)">
        </app-list-item>
      </ng-container>
    </mat-list>
  </div>

  <app-dictionary (letterClicked)="scrollTo($event)"></app-dictionary>

</div>
