<div class="mini-player" (click)="next.emit()">
  <mat-progress-bar [mode]="loading ? 'indeterminate' : 'determinate'" [value]="currentTime / duration * 100"></mat-progress-bar>
  <div class="avatar" [style]="getAvatarStyle(currentTrack)">
    <mat-icon *ngIf="!currentTrack || !currentTrack.coverUrl">music_note</mat-icon>
  </div>
  <div class="meta">
    <span class="title">{{ currentTrack ? currentTrack.metadata.title : '' }}</span>
    <span class="artist">{{ currentTrack ? currentTrack.metadata.artist : '' }}</span>
  </div>
  <div class="controls">
    <button mat-button mat-icon-button
            class="previous"
            (click)="library.playPreviousTrackInPlaylist()"
            [disabled]="!currentTrack || library.playlist.length <= 1">
      <mat-icon>skip_previous</mat-icon>
    </button>
    <button mat-button mat-icon-button
            class="playPause"
            [disabled]="!currentTrack"
            (click)="playing ? pause() : play(); $event.stopPropagation()">
      <mat-icon>{{ playing ? 'pause' : 'play_arrow' }}</mat-icon>
    </button>
    <button mat-button mat-icon-button
            class="next"
            [disabled]="!currentTrack || library.playlist.length <= 1"
            (click)="library.playNextTrackInPlaylist(); $event.stopPropagation()">
      <mat-icon>skip_next</mat-icon>
    </button>
  </div>
</div>
