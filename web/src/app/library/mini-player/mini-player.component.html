<div class="mini-player" (click)="onNext.emit()">
  <mat-progress-bar [mode]="audio.loading ? 'indeterminate' : 'determinate'" [value]="audio.currentTime / audio.duration * 100"></mat-progress-bar>
  <div class="avatar" [style]="getAvatarStyle(library.currentTrack)">
    <mat-icon *ngIf="!library.currentTrack || !library.currentTrack.coverUrl">music_note</mat-icon>
  </div>
  <div class="meta">
    <span class="title">{{library.currentTrack ? library.currentTrack.metadata.title : ''}}</span>
    <span class="artist">{{library.currentTrack ? library.currentTrack.metadata.artist : ''}}</span>
  </div>
  <div class="controls">
    <button mat-button mat-icon-button
            class="previous"
            (click)="library.playPreviousTrackInPlaylist()"
            [disabled]="!library.currentTrack || library.playlist.length <= 1">
      <mat-icon>skip_previous</mat-icon>
    </button>
    <button mat-button mat-icon-button
            class="playPause"
            [disabled]="!library.currentTrack"
            (click)="audio.playing ? audio.pause() : audio.play(); $event.stopPropagation()">
      <mat-icon>{{audio.playing ? 'pause' : 'play_arrow'}}</mat-icon>
    </button>
    <button mat-button mat-icon-button
            class="next"
            [disabled]="!library.currentTrack || library.playlist.length <= 1"
            (click)="library.playNextTrackInPlaylist(); $event.stopPropagation()">
      <mat-icon>skip_next</mat-icon>
    </button>
  </div>
</div>
